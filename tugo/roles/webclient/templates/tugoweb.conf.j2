server {
	gzip on;
    gzip_http_version 1.1;
    gzip_comp_level 6;
	gzip_proxied any;
	gzip_types text/plain application/xml text/css text/js text/xml application/x-javascript text/javascript application/json application/xml+rss;
	gzip_buffers 16 8k;

	ssl on ;

	ssl_certificate      /etc/nginx/ssl/tugoapp.com_combined.cer;
    ssl_certificate_key  /etc/nginx/ssl/tugoapp.com.key ;

	ssl_session_timeout  10m;

	ssl_protocols TLSv1 TLSv1.1 TLSv1.2;
    ssl_ciphers ECDHE-RSA-AES256-SHA384:AES256-SHA256:RC4:HIGH:!MD5:!aNULL:!eNULL:!NULL:!DH:!EDH:!AESGCM:!ECDHE-RSA-AES128-SHA256:!ECDHE-RSA-AES128-SHA:!AES128-SHA256:!AES128-SHA:!CAMELLIA128-SHA:!ECDHE-RSA-RC4-SHA:!RC4-SHA;
	ssl_prefer_server_ciphers   on;
    ssl_session_cache shared:SSL:10m;

	error_log /var/log/nginx/tugoapp/error.log ;
	access_log /var/log/nginx/tugoapp/access.log custom;

	listen 443 ssl;
	
	server_name {{ tugoweb_server_name }};

	location / {
	root /opt/tugo-webapp ;
		error_page 404 = @go_home;
	auth_basic "Restricted";
	auth_basic_user_file /etc/nginx/conf.d/webapp.htpasswd;
	}
	location @go_home {
		return 301 /;
	}
}
